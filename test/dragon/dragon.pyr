include "../cameras/canon_40d.pyr" as response_curves

image = {
	width = 512
	height = 300
	format = Image.Png
	rgb_curves = response_curves
}

renderer = Renderer.PhotonMapping {
	pixel_samples = 100
	spectrum.samples = 10
	spectrum.bins = 50
	spectrum.span = [400, 700]
	tile_size = 32
	bounces = 20
	light_samples = 1
	light_bounces = 256
	photons = 100000
	photon_bounces = 20
	photon_passes = 10
	radius = 0.2
}

camera = Camera.Perspective {
	fov = 27
	transform = Transform.LookAt
	transform.from = Vector { x = -40 y = -30 z = 20 }
	transform.to = Vector { z = 4.7 }
	transform.up = Vector { z = 1 }
}

world.sky = Sky.Color(0)
world.objects = [
	Shape.Mesh {
		file = "dragon.obj"

		materials.dragon = Material.Refractive {
			ior = 1.5
			_ior = 2.37782
			dispersion = 0.01371
			color = 1
		}

		transform = Transform.LookAt {
			from = Vector
			to = Vector(0, 0, -1)
			up = Vector(8, 2, 0)
		}
	},

	Shape.Plane {
		origin = Vector
		normal = Vector { z = 1 }
		material = Material.Diffuse { color = 0.4 }
	},

	Shape.Plane {
		origin = Vector { y = -10 }
		normal = Vector { y = -1 }
		material = Material.Diffuse { color = 0.4 }
	},

	Shape.Plane {
		origin = Vector { x = -11 }
		normal = Vector { x = 1 }
		material = Material.Diffuse { color = 0.4 }
	},

	Light.Point {
		position = Vector { x = 10 y = -25 z = 60 }
		direction = Vector { x = -10 y = 25 z = -57 }
		beam_angle = 6
		color = 5000
		width = 0.53
	}
]
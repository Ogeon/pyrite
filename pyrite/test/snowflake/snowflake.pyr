include "../cameras/canon_40d.pyr" as response_curves

image = {
	width = 512
	height = 512
	format = Image.Png
	rgb_curves = response_curves
}

renderer = Renderer.Bidirectional {
	pixel_samples = 100
	spectrum.samples = 5
	spectrum.bins = 50
	spectrum.span = [400, 700]
	tile_size = 32
	bounces = 256
	light_samples = 2
}

camera = Camera.Perspective {
	fov = 11
	transform = Transform.LookAt
	transform.from = Vector(15, -10, 40)
	transform.up = Vector { y = 1 z = 2 }
	focus_distance = 43.874821937
	aperture = 3
}

ice = Material.Refractive {
	ior = 1.30144
	dispersion = 0.00287
	color = 1
}

background = Material.Diffuse {
	color = Math.Mul {
		a = Color.Spectrum([
			[400, 0.025],
			[600, 0.0175],
			[700, 0.01]
		])

		b = 0.2
	}
}

world.sky = Sky.Color {
	color = Color.Spectrum([
		[400, 0.3],
		[600, 0.2],
		[700, 0.1]
	])
}

world.objects = [
	Shape.Mesh {
		file = "snowflake.obj"
		materials.snowflake = ice
	},

	Shape.Sphere {
		position = Vector(0, 150, 50)
		radius = 30
		material = Material.Emission { color = 6 }
	},

	Shape.Sphere {
		position = Vector(100, -100, 50)
		radius = 10
		material = Material.Emission { color = 3 }
	},

	Shape.Sphere {
		radius = 200
		position = Vector { z = -205 }
		material = background
	}
]
